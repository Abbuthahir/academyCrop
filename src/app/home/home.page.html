<ion-header>
  <ion-toolbar>
    <ion-title>Image Cropping</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cropImage()" *ngIf="myImage">
        <ion-icon slot="icon-only" name="checkMark"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-button (click)="selectImage()" expand="full" *ngIf="!myImage"> Select Image</ion-button>

  <ion-row *ngIf="myImage">
    <ion-col size="3" class="ion-text-center">
      <ion-button fill="clear" (click)="rotate()">
        <ion-icon name="refresh" slot="start"></ion-icon> Rotate
      </ion-button>
    </ion-col>
    <ion-col size="3" class="ion-text-center">
      <ion-button fill="clear" (click)="flipHorizontal()"> Flip X </ion-button>
    </ion-col>
    <ion-col size="3" class="ion-text-center">
      <ion-button fill="clear" (click)="flipVertical()"> Flip Y </ion-button>
    </ion-col>
    <ion-col size="3" class="ion-text-center">
      <ion-button fill="clear" (click)="discardChanges()"> Discard </ion-button>
    </ion-col>
  </ion-row>

  <image-cropper #cropper [autoCrop]="false" [imageBase64]="myImage" [hideResizeSquares]="isMobile"
    [maintainAspectRatio]="true" [aspectRatio]="1 / 1" format="png" (imageLoaded)="imageLoaded()"
    (loadImageFailed)="loadImageFailed()" [transform]="transform"></image-cropper>
  <img [src]="croppedImage" *ngIf="croppedImage">
</ion-content>